```cpp
#include <bits/stdc++.h>
using namespace std;

string solution(string &forth) {
    
    int len = forth.size();
    
    int left = 0;
    int right = 0;
    int top =  0;
    
    int del_x = 0;
    
    for(int i=0; i<len; i++) {
        
        if(forth[i]=='N') {
            top++;
        } else if(forth[i]=='E') {
            del_x++;
            right = max(right, del_x);
        } else {
            del_x--;
            left = min(left, del_x);
        }
        
    }
    
    left = abs(left);
    
    int m = (left + right) + 3;
    int n = top + 3;
    
    int start_i = 1;
    int start_j = left+1;
    
    int end_i = start_i + top;
    int end_j = start_j + del_x;
    
    vector<vector<pair<char, int>>> grid(n, vector<pair<char, int>> (m, {'.', 1e9}));
    
    int temp_i = start_i;
    int temp_j = start_j;
    
    for(int i=0; i<len; i++) {
        
        if(forth[i]=='N') {
            temp_i++;
        } else if(forth[i]=='S') {
            temp_i--;
        } else if(forth[i]=='E') {
            temp_j++;
        } else {
            temp_j--;
        }
        
        grid[temp_i][temp_j].first = '#';
        
    }
    
    queue<pair<int, int>> q;
    q.push({end_i, end_j});
    grid[end_i][end_j].second = 0;
    
    int del_i[] = {1, -1, 0, 0};
    int del_j[] = {0, 0, 1, -1};
    
    while(!q.empty()) {
        
        int i = q.front().first;
        int j = q.front().second;
        q.pop();
        
        for(int k=0; k<4; k++) {
            
            int new_i = i + del_i[k];
            int new_j = j + del_j[k];
            
            if(
              new_i>=0 &&
              new_i<n &&
              new_j>=0 &&
              new_j<m &&
              grid[new_i][new_j].first=='.' &&
              grid[new_i][new_j].second > 1 + grid[i][j].second
              ) {
                
                grid[new_i][new_j].second = 1 + grid[i][j].second;
                
                if(k==0) {
                    grid[new_i][new_j].first = 'N';
                } else if(k==1) {
                    grid[new_i][new_j].first = 'S';
                } else if(k==2) {
                    grid[new_i][new_j].first = 'E';
                } else {
                    grid[new_i][new_j].first = 'W';
                }
                
                q.push({new_i, new_j});
                
            }
            
        }
        
    }
    
    int i = start_i;
    int j = start_j;
    
    string ans = "";
    
    while(i!=end_i || j!=end_j) {
        
        ans += grid[i][j].first;
        
        if(grid[i][j].first=='N') {
            i--;
        } else if(grid[i][j].first=='S') {
            i++;
        } else if(grid[i][j].first=='E') {
            j--;
        } else {
            j++;
        }
        
    }
    
    reverse(ans.begin(), ans.end());
    
    return ans;
     
}

int main() {
        
    string forth;
    cin >> forth;
    
    cout << solution(forth);
    
    return 0;
}
```
