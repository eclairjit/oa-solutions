```cpp
#include <bits/stdc++.h>
using namespace std;

string s;
map<char, int> mp;
vector<vector<vector<int>>> dp;

int f(int i, char mx, int count) {
    
    if(i<0) return 0;
    
    if(dp[i][mx-'A'][count] != -1) return dp[i][mx-'A'][count];
    
    int ans = INT_MIN;
    
    for(char c='A'; c<='E'; c++) {
        
        if(c==s[i]) {
            
            int currNum = (c>=mx) ? mp[c] : -mp[c];
            ans = max(ans, currNum + f(i-1, max(mx, c), count));
            
        } else if(count==0) {
            
            int currNum = (c>=mx) ? mp[c] : -mp[c];
            ans = max(ans, currNum + f(i-1, max(mx, c), 1));
            
        }
        
    }
    
    return  dp[i][mx-'A'][count] = ans;
    
}

int getMaxNumber(string &s) {
    
    int n = s.size();
    
    dp.resize(n, vector<vector<int>> (5, vector<int> (2, -1)));
    
    return f(n-1, 'A', 0);
    
}

int main() {
    
    cin >> s;
    
    mp['A'] = 1;
    mp['B'] = 10;
    mp['C'] = 100;
    mp['D'] = 1000;
    mp['E'] = 10000;
    
    cout << getMaxNumber(s);
    
    return 0;
}
```
